{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Pramuditha Kaushalya\\\\Desktop\\\\VX Leave\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\Pramuditha Kaushalya\\\\Desktop\\\\VX Leave\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Pramuditha Kaushalya\\\\Desktop\\\\VX Leave\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Pramuditha Kaushalya\\\\Desktop\\\\VX Leave\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Pramuditha Kaushalya\\\\Desktop\\\\VX Leave\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Pramuditha Kaushalya\\\\Desktop\\\\VX Leave\\\\front_end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Pramuditha Kaushalya\\\\Desktop\\\\VX Leave\\\\front_end\\\\src\\\\components\\\\Settings\\\\LeaveCalender.js\";\nimport React from 'react';\nimport 'antd/dist/antd.css';\nimport axios from 'axios';\nimport './index.css';\nimport { Calendar, Card, Modal, Form, Input, message, Badge, Table } from 'antd';\nvar ReasonForm = Form.create({\n  name: 'form_in_modal'\n})(\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_class, _React$Component);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(_class).apply(this, arguments));\n  }\n\n  _createClass(_class, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          visible = _this$props.visible,\n          onCancel = _this$props.onCancel,\n          onCreate = _this$props.onCreate,\n          form = _this$props.form;\n      var getFieldDecorator = form.getFieldDecorator;\n      var columns = [_objectSpread({\n        title: 'Name',\n        key: '0',\n        dataIndex: 'user'\n      }, this.getColumnSearchProps('user')), _objectSpread({\n        title: 'Type',\n        key: '1',\n        dataIndex: 'type'\n      }, this.getColumnSearchProps('type')), {\n        title: 'Start Date',\n        key: '2',\n        dataIndex: 'startDate'\n      }, {\n        title: 'End Date',\n        dataIndex: 'endDate'\n      }, {\n        title: 'Number of days',\n        dataIndex: 'number_of_leave_days'\n      }, {\n        title: 'Date of request',\n        dataIndex: 'formatDateTime'\n      }, _objectSpread({\n        title: 'Supervisor 01',\n        dataIndex: 'supervisor1'\n      }, this.getColumnSearchProps('supervisor1')), _objectSpread({\n        title: 'Supervisor 02',\n        dataIndex: 'supervisor2'\n      }, this.getColumnSearchProps('supervisor2')), {\n        dataIndex: '',\n        key: 'b',\n        width: '1%',\n        render: function render(emp) {\n          return React.createElement(Icon, {\n            type: \"like\",\n            onClick: _this.show.bind(_this, emp),\n            theme: \"twoTone\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          });\n        }\n      }, {\n        dataIndex: '',\n        key: 'c',\n        width: '1%',\n        render: function render(emp) {\n          return React.createElement(Icon, {\n            type: \"dislike\",\n            onClick: _this.showModal.bind(_this, emp),\n            theme: \"twoTone\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63\n            },\n            __self: this\n          });\n        }\n      }];\n      return React.createElement(Modal, {\n        visible: visible,\n        title: \"Set holiday\",\n        okText: \"Save\",\n        onCancel: onCancel,\n        onOk: onCreate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(Table, {\n        rowKey: function rowKey(record) {\n          return record.id;\n        },\n        columns: columns,\n        dataSource: this.state.data,\n        pagination: {\n          pageSize: 7\n        },\n        size: \"middle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(Form, {\n        layout: \"vertical\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Form.Item, {\n        label: \"Reason\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, getFieldDecorator('reason', {\n        rules: [{\n          required: true,\n          message: 'Please input the reason'\n        }]\n      })(React.createElement(Input, {\n        type: \"textarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return _class;\n}(React.Component));\n\nvar LeaveCalender =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(LeaveCalender, _React$Component2);\n\n  function LeaveCalender() {\n    var _getPrototypeOf2;\n\n    var _this2;\n\n    _classCallCheck(this, LeaveCalender);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LeaveCalender)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this2.state = {\n      saveDates: [],\n      selectedValue: null,\n      visible: false\n    };\n\n    _this2.onSelect = function (value) {\n      _this2.setState({\n        selectedValue: value,\n        visible: true\n      });\n    };\n\n    _this2.handleCancel = function () {\n      _this2.reload();\n\n      var form = _this2.formRef.props.form;\n      form.resetFields();\n\n      _this2.setState({\n        visible: false\n      });\n    };\n\n    _this2.handleSet = function () {\n      var form = _this2.formRef.props.form;\n      form.validateFields(function (err, values) {\n        var calendar = {\n          date: _this2.state.selectedValue.format('YYYY-MM-DD'),\n          reason: values.reason\n        };\n\n        if (!err) {\n          axios.post('http://localhost:5000/calender/set_date', calendar, {\n            headers: {\n              Authorization: 'Bearer ' + localStorage.getItem(\"header\")\n            }\n          }).then(function (res) {\n            if (res.data === true) {\n              message.success(\"Set as a holiday!\");\n\n              _this2.props.form.resetFields();\n\n              _this2.handleCancel();\n            } else {\n              message.error(\"Internal server error!\");\n            }\n          }).catch(function (e) {\n            message.error(e.response.data.error);\n          });\n        }\n      });\n    };\n\n    _this2.saveFormRef = function (formRef) {\n      _this2.formRef = formRef;\n    };\n\n    _this2.dateCellRender = function (value) {\n      return React.createElement(\"ul\", {\n        className: \"events\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, _this2.state.saveDates.map(function (item) {\n        return item.date === value.format('YYYY-MM-DD') ? React.createElement(\"li\", {\n          key: item.date,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, React.createElement(Badge, {\n          status: \"success\",\n          text: item.reason,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }), React.createElement(Badge, {\n          status: \"warning\",\n          text: item.createdBy,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }), React.createElement(Badge, {\n          status: \"warning\",\n          text: item.createdAt,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        })) : null;\n      }));\n    };\n\n    return _this2;\n  }\n\n  _createClass(LeaveCalender, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.reload();\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      var _this3 = this;\n\n      axios.get('http://localhost:5000/calender/all', {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem(\"header\")\n        }\n      }).then(function (res) {\n        _this3.setState({\n          saveDates: res.data\n        });\n      }).catch(function (e) {\n        console.log(e.response.data.error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(Calendar, {\n        onSelect: this.onSelect,\n        dateCellRender: this.dateCellRender,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      })), React.createElement(ReasonForm, {\n        wrappedComponentRef: this.saveFormRef,\n        visible: this.state.visible,\n        onCancel: this.handleCancel,\n        onCreate: this.handleSet,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return LeaveCalender;\n}(React.Component);\n\nvar WrappedLeaveCalender = Form.create({\n  name: 'calender'\n})(LeaveCalender);\nexport default WrappedLeaveCalender;","map":{"version":3,"sources":["C:\\Users\\Pramuditha Kaushalya\\Desktop\\VX Leave\\front_end\\src\\components\\Settings\\LeaveCalender.js"],"names":["React","axios","Calendar","Card","Modal","Form","Input","message","Badge","Table","ReasonForm","create","name","props","visible","onCancel","onCreate","form","getFieldDecorator","columns","title","key","dataIndex","getColumnSearchProps","width","render","emp","show","bind","showModal","record","id","state","data","pageSize","rules","required","Component","LeaveCalender","saveDates","selectedValue","onSelect","value","setState","handleCancel","reload","formRef","resetFields","handleSet","validateFields","err","values","calendar","date","format","reason","post","headers","Authorization","localStorage","getItem","then","res","success","error","catch","e","response","saveFormRef","dateCellRender","map","item","createdBy","createdAt","get","console","log","WrappedLeaveCalender"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport axios from 'axios';\r\nimport './index.css';\r\nimport { Calendar, Card, Modal, Form, Input, message, Badge, Table } from 'antd';\r\n\r\nconst ReasonForm = Form.create({ name: 'form_in_modal' })(\r\n\r\n  class extends React.Component {\r\n    render() {\r\n      const { visible, onCancel, onCreate, form } = this.props;\r\n      const { getFieldDecorator } = form;\r\n      const columns = [\r\n        {\r\n          title: 'Name',\r\n          key: '0',\r\n          dataIndex: 'user',\r\n          ...this.getColumnSearchProps('user'),\r\n        },  \r\n        {\r\n          title: 'Type',\r\n          key: '1',\r\n          dataIndex: 'type',\r\n          ...this.getColumnSearchProps('type'),\r\n        },\r\n        {\r\n          title: 'Start Date',\r\n          key: '2',\r\n          dataIndex: 'startDate'\r\n        },\r\n        {\r\n          title: 'End Date',\r\n          dataIndex: 'endDate'\r\n        },\r\n        {\r\n            title: 'Number of days',\r\n            dataIndex: 'number_of_leave_days'\r\n        },\r\n        {\r\n            title: 'Date of request',\r\n            dataIndex: 'formatDateTime',\r\n        },\r\n        {\r\n          title: 'Supervisor 01',\r\n          dataIndex: 'supervisor1',\r\n          ...this.getColumnSearchProps('supervisor1'),\r\n        },\r\n        {\r\n          title: 'Supervisor 02',\r\n          dataIndex: 'supervisor2',\r\n          ...this.getColumnSearchProps('supervisor2'),\r\n        },\r\n        {\r\n            dataIndex: '',\r\n            key: 'b',\r\n            width: '1%',\r\n            render: (emp) => <Icon type=\"like\" onClick={this.show.bind(this, emp)} theme=\"twoTone\" />,\r\n        },\r\n        {\r\n          dataIndex: '',\r\n          key: 'c',\r\n          width: '1%',\r\n          render: (emp) => <Icon type=\"dislike\" onClick={this.showModal.bind(this, emp)} theme=\"twoTone\" />,\r\n      },\r\n\r\n      ];\r\n      return (\r\n        <Modal\r\n          visible={visible}\r\n          title=\"Set holiday\"\r\n          okText=\"Save\"\r\n          onCancel={onCancel}\r\n          onOk={onCreate}\r\n        >\r\n          <Table rowKey={record => record.id} columns={columns} dataSource={this.state.data}  pagination={{ pageSize: 7 }} size=\"middle\" />\r\n          <Form layout=\"vertical\">\r\n            <Form.Item label=\"Reason\">\r\n              {getFieldDecorator('reason', {\r\n                rules: [{ required: true, message: 'Please input the reason' }],\r\n              })(<Input type=\"textarea\"/>)}\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n      );\r\n    }\r\n  },\r\n);\r\n\r\nclass LeaveCalender extends React.Component {\r\n\r\n  componentWillMount () {\r\n    this.reload();\r\n  }\r\n  \r\n  reload () {\r\n    axios.get('http://localhost:5000/calender/all', \r\n    {\r\n        headers: {\r\n            Authorization: 'Bearer ' + localStorage.getItem(\"header\")\r\n        }\r\n    })\r\n    .then(res => {\r\n      this.setState({\r\n        saveDates : res.data\r\n      });\r\n    }).catch(e => {\r\n      console.log(e.response.data.error);\r\n    })\r\n  }\r\n\r\n  state = {\r\n    saveDates: [],\r\n    selectedValue: null,\r\n    visible: false\r\n  };\r\n\r\n  onSelect = value => {\r\n    this.setState({\r\n      selectedValue: value,\r\n      visible: true\r\n    });\r\n  };\r\n\r\n  handleCancel = () => {\r\n    this.reload();\r\n    const { form } = this.formRef.props;\r\n    form.resetFields(); \r\n    this.setState({ \r\n      visible: false\r\n    });\r\n  };\r\n\r\n  handleSet = () => {\r\n    \r\n    const { form } = this.formRef.props;\r\n    form.validateFields((err, values) => {\r\n\r\n      const calendar = {\r\n        date: this.state.selectedValue.format('YYYY-MM-DD'),  \r\n        reason : values.reason\r\n      }\r\n\r\n      if (!err) {\r\n        axios.post('http://localhost:5000/calender/set_date', \r\n        calendar,\r\n        {\r\n            headers: {\r\n                Authorization: 'Bearer ' + localStorage.getItem(\"header\")\r\n            }\r\n        })\r\n        .then(res => {\r\n            if(res.data === true){\r\n              message.success(\"Set as a holiday!\");\r\n              this.props.form.resetFields(); \r\n              this.handleCancel();\r\n            }  else{\r\n              message.error(\"Internal server error!\"); \r\n            }\r\n        }).catch(e => {\r\n          message.error(e.response.data.error); \r\n        })\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  saveFormRef = formRef => {\r\n    this.formRef = formRef;\r\n  };\r\n\r\n  dateCellRender = (value) => {\r\n     return (\r\n          <ul className=\"events\">\r\n            {this.state.saveDates.map(item => (\r\n              item.date === value.format('YYYY-MM-DD')?\r\n              <li key={item.date}>\r\n                <Badge status='success' text={item.reason} />\r\n                <Badge status='warning' text={item.createdBy} />\r\n                <Badge status='warning' text={item.createdAt} />\r\n              </li>\r\n              :null\r\n            ))}\r\n          </ul>\r\n        );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Card>\r\n          <Calendar onSelect={this.onSelect} dateCellRender={this.dateCellRender} />\r\n        </Card>\r\n\r\n        <ReasonForm\r\n          wrappedComponentRef={this.saveFormRef}\r\n          visible={this.state.visible}\r\n          onCancel={this.handleCancel}\r\n          onCreate={this.handleSet}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst WrappedLeaveCalender = Form.create({ name: 'calender' })(LeaveCalender);\r\n\r\nexport default WrappedLeaveCalender;"]},"metadata":{},"sourceType":"module"}